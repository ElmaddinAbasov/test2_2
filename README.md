# test2_2

# Тестовое задание 2

Напишите программу на С++, которая:

  -  считывает текстовый файл Test_data.txt(каждая строка в файле содержит три числа типа float, разделенные пробелом)
  -  удаляет все строки, у которых все три числа полностью совпадают с одной из предыдущих строк(удаляются только копии)
  -  сохраняет оставшиеся строки в новый файл, сохраняя исходный порядок.

Требования:

  1. Программа должна работать эффективно даже для больших файлов(100к+строк)
  2. Программа должна использовать только стандартную бибилиотеку С++ или Qt
  3. Программа далжна сохранять порядок строк

Примечание： задача может быть решена алгоритмом полного перебора. Но нужно найти другой способ решения

# Мое решение

- Сначала считываем все содержимое файла Test_data.txt в char buf[buf_sz] поле класса test2, считывание содержимого производится функцией read_file.
- Теперь начинаем выбирать по одной строке из массива buf с помощью метода get_string()
- Допустим у нас есть строка "2.0 3.0 4.0". Вызываем метод split(char* buf) парсим строку, чтобу получить число, которое будет указывать на индекс в хэш таблице. Например в данном случае у нас получилось 9, сохраняем в 9 ячейке.
- И так считвыаем весь массив строк, парся каждую строку вычисляя индекс.
- Допустим мы прочитали следующую строку "2.0 1.0 6.0" - с помощью метода split(char* buf) получаем индекс, в данном случае снова 9. Обращаемся к хэш таблице к ячейке с индексом, там уже хранится строка "2.0 3.0 4.0", проходим по цепи и сравниваем на текущую строку со всеми строками, которые хранятся в цепи, если копий нет, то добавляем новую в хэш таблицу.

Для решение будем использовать структура данных хэш таблицу. Опишем ее в классе class hash_table. 
# Класс hash_table
Опишем поля класса:
  
  - struct bucket с полями value, char buf[buf_cap]. В поле value - хранится вещественное число, в поле buf - хранится строка с вещественными числами
  - struct chain - хранит в себе структуры типа bucket.
  - хэш таблица есть массив из элемнтов типа chain.

  Хэш таблица будет использовать метод цепочек, для избежания коллизий.  

*Методы класса hash_table*:
  - int hash(key) возвращает хэш значение
  - void insert(int fd, double v, const char* b) - сохраняет строку в хэш таблице.
  - int search(int index, const char* b) - ищет в цепочках повторяющие сроки, если находит, то не добавляет хэш таблицу
# Запуск
Как запускать программу.
cmake .  - точка текущая директория
make - получаем исполняемый файл
После запускаем исполняемый файл
Исходное содержимое файла Test_data.txt 

<img width="960" height="432" alt="Screenshot from 2025-08-13 13-24-02" src="https://github.com/user-attachments/assets/ede754ec-4067-40a6-9609-8b663261f368" />

Содержимое файла res.txt


<img width="782" height="217" alt="Screenshot from 2025-08-13 13-24-16" src="https://github.com/user-attachments/assets/1b873165-df52-488b-94ee-42b1dec25506" />

